(()=>{"use strict";var e=function(){function e(){}return e.show=function(e){var n;switch(e){case"ru":n="Пожалуйста подождите!...";break;case"en":n="Please wait...";break;case"kk":n="Өтінеміз, күте тұрыңыз...";break;default:n="Пожалуйста подождите!..."}document.body.insertAdjacentHTML("beforeend",'<div class="pi_tech_container" id="pi_tech_spinner">\n    <div>\n        <svg height="130px" width="130px" viewBox="0 0 1018 858" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M901.567 0L29.2931 0.00158481C18.4749 0.00158576 9.09657 7.48817 6.69975 18.0376L0.832147 43.8635C-2.46179 58.3616 8.55821 72.166 23.4258 72.1659L180.54 72.1645L163.941 144.332H1013.86C1032.42 71.5038 977.404 0 901.567 0Z"\n                  class="pi_tech_spinner_logo" fill="transparent"/>\n            <path d="M972.193 288.663H130.744L87.1538 478.183L237.801 478.181C252.669 478.181 263.689 491.986 260.395 506.484L254.527 532.31C252.13 542.859 242.752 550.346 231.934 550.346H70.556L0 857.105H199.662C252.837 857.105 299.183 820.905 312.06 769.313L348.744 622.334H788.625C840.213 622.334 885.584 588.222 899.913 538.664L972.193 288.663Z"\n                  class="pi_tech_spinner_logo1" fill="transparent"/>\n            <defs>\n                <linearGradient id="paint3_linear" x1="1134.86" y1="580.575" x2="-69.2694" y2="5.95379e-05"\n                                gradientUnits="userSpaceOnUse">\n                    <stop stop-color="#3378FF"/>\n                    <stop offset="1" stop-color="#4BC3F6"/>\n                </linearGradient>\n            </defs>\n        </svg>\n        <h1 class="pi_tech_spinner_text">${loading_text}</h1>\n    </div>\n</div>\n'.replace("${loading_text}",n))},e.hide=function(){var e=document.getElementById("pi_tech_spinner");e&&e.remove()},e}(),n={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3};function t(e,n){return void 0===n&&(n=null),{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:n||e.statusText,json:function(){return JSON.parse(n||e.statusText)}}}function r(e,r,o,i,s){void 0===o&&(o={}),void 0===i&&(i=null),void 0===s&&(s=n);var a=s.ignoreCache||n.ignoreCache,c=s.headers||n.headers,u=s.timeout||n.timeout;return new Promise((function(n,s){var l=new XMLHttpRequest;l.open(e,function(e,n){void 0===n&&(n={});var t=function(e){return void 0===e&&(e={}),Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])})).join("&")}(n);return t?e+(-1===e.indexOf("?")?"?":"&")+t:e}(r,o)),c&&Object.keys(c).forEach((function(e){return l.setRequestHeader(e,c[e])})),a&&l.setRequestHeader("Cache-Control","no-cache"),l.timeout=u,l.onload=function(e){n(function(e){return{ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:e.responseText,json:function(){return JSON.parse(e.responseText)}}}(l))},l.onerror=function(e){n(t(l,"Failed to make request."))},l.ontimeout=function(e){n(t(l,"Request took longer than expected."))},"post"===e&&i?(l.setRequestHeader("Content-Type","application/json"),l.send(JSON.stringify(i))):l.send()}))}var o=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))},i=function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=function(){function e(){}return e.prototype.chargePaymentInit=function(e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(t){switch(t.label){case 0:return[4,r("post","https://cards-stage.pitech.kz/gw/payments/cards/charge",{},e,{headers:{appId:e.appId}})];case 1:return(n=t.sent()).ok?[2,n.json()]:(console.error("Error while calling api (status="+n.status+", text="+n.statusText+")"),[2,null])}}))}))},e.prototype.authPaymentInit=function(e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(t){switch(t.label){case 0:return[4,r("post","https://cards-stage.pitech.kz/gw/payments/cards/auth",{},e,{headers:{appId:e.appId}})];case 1:return(n=t.sent()).ok?[2,n.json()]:(console.error("Error while calling api (status="+n.status+", text="+n.statusText+")"),[2,null])}}))}))},e}(),a=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},c=function(){function n(){this.messageListener=null}return n.prototype.createIFrame=function(e){this.deleteIFrame();var n=document.createElement("div");n.setAttribute("class","pi_tech_container"),n.setAttribute("id","PiTechWidget");var t=document.createElement("iframe");t.setAttribute("class","pi_tech_iframe"),t.setAttribute("src",e),t.setAttribute("scrolling","no"),n.appendChild(t),document.body.appendChild(n)},n.prototype.deleteIFrame=function(){var e=document.getElementById("PiTechWidget");e&&e.remove(),this.messageListener&&window.removeEventListener("message",this.messageListener,!1)},n.prototype.createIframeListener=function(e){var n=this;return function(t){if(t&&t.data){var r=t.data.action,o=t.data.value;switch(r){case"SUCCESS":e.onSuccess(o);break;case"ERROR":e.onFailure(o);break;case"COMPLETE":e.onComplete(),n.deleteIFrame();break;default:return}}}},n.prototype.pay=function(n,t,r){return o=this,i=void 0,u=function(){var o,i;return function(e,n){var t,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(c){switch(c.label){case 0:if(!function(e){return console.log(e),e&&0!==Object.keys(e).length?e.appId&&""!==e.appId?!e.amount||e.amount<=0?(console.error("amount","Amount must be positive value"),!1):""===e.extClientRef?(console.error("extClientRef","Client reference must not be blank"),!1):e.currency&&""!==e.currency?e.description&&""!==e.description?e.email&&(n=e.email,!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(n))?(console.error("email","Email invalid"),!1):e.extOrdersId&&""!==e.extOrdersId?e.successReturnUrl&&a(e.successReturnUrl)?!(!e.errorReturnUrl||!a(e.errorReturnUrl))||(console.error("errorReturnUrl","Failure return URL incorrect"),!1):(console.error("successReturnUrl","Success return URL incorrect"),!1):(console.error("extOrdersId","Order ID reference must not be blank"),!1):(console.error("description","Description undefined"),!1):(console.error("currency","Currency must not be blank"),!1):(console.error("appId","API key undefined"),!1):(console.error("options","Widget options undefined"),!1);var n}(t)||!function(e){return null==e.onSuccess?(console.error("onSuccess callback undefined"),!1):null!=e.onFailure||(console.error("onFailure callback undefined"),!1)}(r))return[2];switch(o=null,i=new s,e.show(t.lang),n){case"auth":return[3,1];case"charge":return[3,3]}return[3,5];case 1:return[4,i.authPaymentInit(t)];case 2:return o=c.sent(),[3,6];case 3:return[4,i.chargePaymentInit(t)];case 4:return o=c.sent(),[3,6];case 5:return console.error("invalid action"),[2];case 6:return e.hide(),o&&(this.createIFrame(o.paymentUrl),this.messageListener=this.createIframeListener(r),window.addEventListener("message",this.messageListener,!1)),[2]}}))},new((c=void 0)||(c=Promise))((function(e,n){function t(e){try{s(u.next(e))}catch(e){n(e)}}function r(e){try{s(u.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof c?o:new c((function(e){e(o)}))).then(t,r)}s((u=u.apply(o,i||[])).next())}));var o,i,c,u},n}();window.styleAdded||(document.head.insertAdjacentHTML("beforeend","<style>.pi_tech_container {\n    z-index: 9997;\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    overflow: hidden;\n    opacity: 1;\n    display: flex;\n    justify-content: center;\n    text-align: center;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.65);\n}\n\n.pi_tech_iframe {\n    width: 500px;\n    height: 778px;\n    border: 1px solid black !important;\n    background-color: #ffffff;\n    border-radius: 10px;\n}\n\n.pi_tech_spinner_container {\n    display: block;\n}\n\n.pi_tech_spinner_text {\n    color: #ffffff;\n}\n\n@media (max-width: 768px) {\n    .pi_tech_spinner_text {\n        font-size: 1.5em;\n        margin: 0 auto;\n    }\n}\n\n@media (max-width: 480px) {\n    .pi_tech_iframe {\n        height: 100vh;\n        margin: 75px 0 10px 0;\n    }\n}\n\n.merchant-info {\n    min-height: 0 !important;\n}\n\n.pi_tech_spinner_logo {\n    stroke: #ffffff;\n    stroke-width: 10;\n    stroke-dasharray: 2400;\n    stroke-dashoffset: 2500;\n    animation: pi_tech_spinner_offset 1.4s ease-in forwards infinite, fill-it 1.4s 1.4s ease-in-out forwards infinite;\n}\n\n.pi_tech_spinner_logo1 {\n    stroke: #ffffff;\n    stroke-width: 10;\n    stroke-dasharray: 3200;\n    stroke-dashoffset: 3300;\n    animation: pi_tech_spinner_offset1 1.4s ease-in forwards infinite, fill-it 1.4s 1.4s ease-in-out forwards infinite;\n}\n\n.pi_tech_spinner_text {\n    color: #ffffff;\n}\n\n/* .pi_tech_spinner_container */\n\n@media (max-width: 768px) {\n    .pi_tech_spinner_text {\n        font-size: 1.5em;\n        margin: 0 auto;\n    }\n}\n\n@keyframes pi_tech_spinner_offset {\n    from {\n        stroke-dashoffset: 2500;\n    }\n\n    to {\n        stroke-dashoffset: 0;\n    }\n}\n\n@keyframes pi_tech_spinner_offset1 {\n    from {\n        stroke-dashoffset: 3300;\n    }\n\n    to {\n        stroke-dashoffset: 0;\n    }\n}\n\n@keyframes fill-it {\n    0% {\n        fill: #ffffff;\n        stroke-width: 0;\n    }\n\n    50% {\n        fill: transparent;\n    }\n}\n\n</style>"),window.styleAdded=!0),window.PitechPaymentsWidget=function(){return new c}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXJkcy1qcy1saWIvLi9zcmMvU3Bpbm5lci50cyIsIndlYnBhY2s6Ly9jYXJkcy1qcy1saWIvLi9zcmMvc3Bpbm5lci5odG1sIiwid2VicGFjazovL2NhcmRzLWpzLWxpYi8uL3NyYy9yZXF1ZXN0LnRzIiwid2VicGFjazovL2NhcmRzLWpzLWxpYi8uL3NyYy9BcGkudHMiLCJ3ZWJwYWNrOi8vY2FyZHMtanMtbGliLy4vc3JjL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vY2FyZHMtanMtbGliLy4vc3JjL1BpVGVjaFdpZGdldC50cyIsIndlYnBhY2s6Ly9jYXJkcy1qcy1saWIvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiU3Bpbm5lciIsInNob3ciLCJsYW5nIiwibWVzc2FnZSIsImRvY3VtZW50IiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCIsInJlcGxhY2UiLCJoaWRlIiwiZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlIiwiREVGQVVMVF9SRVFVRVNUX09QVElPTlMiLCJpZ25vcmVDYWNoZSIsImhlYWRlcnMiLCJBY2NlcHQiLCJ0aW1lb3V0IiwiZXJyb3JSZXNwb25zZSIsInhociIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsImRhdGEiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwicmVxdWVzdCIsIm1ldGhvZCIsInVybCIsInF1ZXJ5UGFyYW1zIiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwicGFyYW1zIiwicXVlcnlTdHJpbmciLCJPYmplY3QiLCJrZXlzIiwibWFwIiwiayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJpbmRleE9mIiwid2l0aFF1ZXJ5IiwiZm9yRWFjaCIsImtleSIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJldnQiLCJyZXNwb25zZVRleHQiLCJwYXJzZVhIUlJlc3VsdCIsIm9uZXJyb3IiLCJvbnRpbWVvdXQiLCJzZW5kIiwic3RyaW5naWZ5IiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImYiLCJ5IiwidCIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInRoaXMiLCJuIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiY2FsbCIsInBvcCIsImxlbmd0aCIsInB1c2giLCJBcGkiLCJwcm90b3R5cGUiLCJjaGFyZ2VQYXltZW50SW5pdCIsIl9hIiwiYXBwSWQiLCJjb25zb2xlIiwiZXJyb3IiLCJhdXRoUGF5bWVudEluaXQiLCJpc1ZhbGlkSHR0cFVybCIsIlJlZ0V4cCIsInRlc3QiLCJQaVRlY2hXaWRnZXQiLCJtZXNzYWdlTGlzdGVuZXIiLCJjcmVhdGVJRnJhbWUiLCJzcmMiLCJkZWxldGVJRnJhbWUiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImZyYW1lIiwiYXBwZW5kQ2hpbGQiLCJ3aWRnZXQiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY3JlYXRlSWZyYW1lTGlzdGVuZXIiLCJjYWxsYmFja3MiLCJfdGhpcyIsImV2ZW50IiwiYWN0aW9uIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwib25Db21wbGV0ZSIsInBheSIsImluaXREYXRhIiwiYXBpIiwiX2IiLCJsb2ciLCJhbW91bnQiLCJleHRDbGllbnRSZWYiLCJjdXJyZW5jeSIsImRlc2NyaXB0aW9uIiwiZW1haWwiLCJleHRPcmRlcnNJZCIsInN1Y2Nlc3NSZXR1cm5VcmwiLCJlcnJvclJldHVyblVybCIsInZhbGlkYXRlT3B0aW9ucyIsInVuZGVmaW5lZCIsInZhbGlkYXRlQ2FsbGJhY2tzIiwicGF5bWVudFVybCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdHlsZUFkZGVkIiwiaGVhZCIsIlBpdGVjaFBheW1lbnRzV2lkZ2V0Il0sIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBeUIsV0FDekIsU0FBU0EsS0F5QlQsT0F2QkFBLEVBQVFDLEtBQU8sU0FBVUMsR0FDckIsSUFBSUMsRUFDSixPQUFRRCxHQUNKLElBQUssS0FDREMsRUFBVSwyQkFDVixNQUNKLElBQUssS0FDREEsRUFBVSxpQkFDVixNQUNKLElBQUssS0FDREEsRUFBVSw0QkFDVixNQUNKLFFBQ0lBLEVBQVUsMkJBRWxCQyxTQUFTQyxLQUFLQyxtQkFBbUIsWUNuQnpDLGkyQ0RtQjhEQyxRQUFRLGtCQUFtQkosS0FFckZILEVBQVFRLEtBQU8sV0FDWCxJQUFJQyxFQUFVTCxTQUFTTSxlQUFlLG1CQUNsQ0QsR0FDQUEsRUFBUUUsVUFHVFgsRUExQmlCLEdFRGpCWSxFQUEwQixDQUNqQ0MsYUFBYSxFQUNiQyxRQUFTLENBQ0xDLE9BQVEsaURBR1pDLFFBQVMsS0F1QmIsU0FBU0MsRUFBY0MsRUFBS2YsR0FFeEIsWUFEZ0IsSUFBWkEsSUFBc0JBLEVBQVUsTUFDN0IsQ0FDSGdCLElBQUksRUFDSkMsT0FBUUYsRUFBSUUsT0FDWkMsV0FBWUgsRUFBSUcsV0FDaEJQLFFBQVNJLEVBQUlJLHdCQUNiQyxLQUFNcEIsR0FBV2UsRUFBSUcsV0FDckJHLEtBQU0sV0FBYyxPQUFPQyxLQUFLQyxNQUFNdkIsR0FBV2UsRUFBSUcsY0FHdEQsU0FBU00sRUFBUUMsRUFBUUMsRUFBS0MsRUFBYXpCLEVBQU0wQixRQUNoQyxJQUFoQkQsSUFBMEJBLEVBQWMsU0FDL0IsSUFBVHpCLElBQW1CQSxFQUFPLFdBQ2QsSUFBWjBCLElBQXNCQSxFQUFVbkIsR0FDcEMsSUFBSUMsRUFBY2tCLEVBQVFsQixhQUFlRCxFQUF3QkMsWUFDN0RDLEVBQVVpQixFQUFRakIsU0FBV0YsRUFBd0JFLFFBQ3JERSxFQUFVZSxFQUFRZixTQUFXSixFQUF3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LFdBTjFCLElBQVVQLEVBQVNDLEVBQVlDLEVBQUdDLEdBaUluRTRDLEVBMUZzQixHQ3BDNUJXLE9BQU80QixhQUNSN0ksU0FBUzhJLEtBQUs1SSxtQkFBbUIsWUFBYSx5Z0VBQzlDK0csT0FBTzRCLFlBQWEsR0FFeEI1QixPQUFPOEIscUJBTDJCLFdBQWMsT0FBTyxJQUFJekMsSSIsImZpbGUiOiJwaXRlY2gtcGF5bWVudHMtd2lkZ2V0LXN0YWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNwaW5uZXIgZnJvbSBcIiEhcmF3LWxvYWRlciEuL3NwaW5uZXIuaHRtbFwiO1xudmFyIFNwaW5uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3Bpbm5lcigpIHtcbiAgICB9XG4gICAgU3Bpbm5lci5zaG93ID0gZnVuY3Rpb24gKGxhbmcpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG4gICAgICAgIHN3aXRjaCAobGFuZykge1xuICAgICAgICAgICAgY2FzZSBcInJ1XCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICfQn9C+0LbQsNC70YPQudGB0YLQsCDQv9C+0LTQvtC20LTQuNGC0LUhLi4uJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlblwiOlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUGxlYXNlIHdhaXQuLi4nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImtrXCI6XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9ICfTqNGC0ZbQvdC10LzRltC3LCDQutKv0YLQtSDRgtKx0YDRi9Kj0YvQty4uLic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAn0J/QvtC20LDQu9GD0LnRgdGC0LAg0L/QvtC00L7QttC00LjRgtC1IS4uLic7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgc3Bpbm5lci5yZXBsYWNlKFwiJHtsb2FkaW5nX3RleHR9XCIsIG1lc3NhZ2UpKTtcbiAgICB9O1xuICAgIFNwaW5uZXIuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlfdGVjaF9zcGlubmVyJyk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3Bpbm5lcjtcbn0oKSk7XG5leHBvcnQgeyBTcGlubmVyIH07XG4iLCJleHBvcnQgZGVmYXVsdCBcIjxkaXYgY2xhc3M9XFxcInBpX3RlY2hfY29udGFpbmVyXFxcIiBpZD1cXFwicGlfdGVjaF9zcGlubmVyXFxcIj5cXG4gICAgPGRpdj5cXG4gICAgICAgIDxzdmcgaGVpZ2h0PVxcXCIxMzBweFxcXCIgd2lkdGg9XFxcIjEzMHB4XFxcIiB2aWV3Qm94PVxcXCIwIDAgMTAxOCA4NThcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCI+XFxuICAgICAgICAgICAgPHBhdGggZD1cXFwiTTkwMS41NjcgMEwyOS4yOTMxIDAuMDAxNTg0ODFDMTguNDc0OSAwLjAwMTU4NTc2IDkuMDk2NTcgNy40ODgxNyA2LjY5OTc1IDE4LjAzNzZMMC44MzIxNDcgNDMuODYzNUMtMi40NjE3OSA1OC4zNjE2IDguNTU4MjEgNzIuMTY2IDIzLjQyNTggNzIuMTY1OUwxODAuNTQgNzIuMTY0NUwxNjMuOTQxIDE0NC4zMzJIMTAxMy44NkMxMDMyLjQyIDcxLjUwMzggOTc3LjQwNCAwIDkwMS41NjcgMFpcXFwiXFxuICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcInBpX3RlY2hfc3Bpbm5lcl9sb2dvXFxcIiBmaWxsPVxcXCJ0cmFuc3BhcmVudFxcXCIvPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XFxcIk05NzIuMTkzIDI4OC42NjNIMTMwLjc0NEw4Ny4xNTM4IDQ3OC4xODNMMjM3LjgwMSA0NzguMTgxQzI1Mi42NjkgNDc4LjE4MSAyNjMuNjg5IDQ5MS45ODYgMjYwLjM5NSA1MDYuNDg0TDI1NC41MjcgNTMyLjMxQzI1Mi4xMyA1NDIuODU5IDI0Mi43NTIgNTUwLjM0NiAyMzEuOTM0IDU1MC4zNDZINzAuNTU2TDAgODU3LjEwNUgxOTkuNjYyQzI1Mi44MzcgODU3LjEwNSAyOTkuMTgzIDgyMC45MDUgMzEyLjA2IDc2OS4zMTNMMzQ4Ljc0NCA2MjIuMzM0SDc4OC42MjVDODQwLjIxMyA2MjIuMzM0IDg4NS41ODQgNTg4LjIyMiA4OTkuOTEzIDUzOC42NjRMOTcyLjE5MyAyODguNjYzWlxcXCJcXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cXFwicGlfdGVjaF9zcGlubmVyX2xvZ28xXFxcIiBmaWxsPVxcXCJ0cmFuc3BhcmVudFxcXCIvPlxcbiAgICAgICAgICAgIDxkZWZzPlxcbiAgICAgICAgICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XFxcInBhaW50M19saW5lYXJcXFwiIHgxPVxcXCIxMTM0Ljg2XFxcIiB5MT1cXFwiNTgwLjU3NVxcXCIgeDI9XFxcIi02OS4yNjk0XFxcIiB5Mj1cXFwiNS45NTM3OWUtMDVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudFVuaXRzPVxcXCJ1c2VyU3BhY2VPblVzZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPVxcXCIjMzM3OEZGXFxcIi8+XFxuICAgICAgICAgICAgICAgICAgICA8c3RvcCBvZmZzZXQ9XFxcIjFcXFwiIHN0b3AtY29sb3I9XFxcIiM0QkMzRjZcXFwiLz5cXG4gICAgICAgICAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cXG4gICAgICAgICAgICA8L2RlZnM+XFxuICAgICAgICA8L3N2Zz5cXG4gICAgICAgIDxoMSBjbGFzcz1cXFwicGlfdGVjaF9zcGlubmVyX3RleHRcXFwiPiR7bG9hZGluZ190ZXh0fTwvaDE+XFxuICAgIDwvZGl2PlxcbjwvZGl2PlxcblwiOyIsImV4cG9ydCB2YXIgREVGQVVMVF9SRVFVRVNUX09QVElPTlMgPSB7XG4gICAgaWdub3JlQ2FjaGU6IGZhbHNlLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCB0ZXh0L3BsYWluJyxcbiAgICB9LFxuICAgIC8vIGRlZmF1bHQgbWF4IGR1cmF0aW9uIGZvciBhIHJlcXVlc3RcbiAgICB0aW1lb3V0OiA1MDAwLFxufTtcbmZ1bmN0aW9uIHF1ZXJ5UGFyYW1zKHBhcmFtcykge1xuICAgIGlmIChwYXJhbXMgPT09IHZvaWQgMCkgeyBwYXJhbXMgPSB7fTsgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba10pOyB9KVxuICAgICAgICAuam9pbignJicpO1xufVxuZnVuY3Rpb24gd2l0aFF1ZXJ5KHVybCwgcGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IHt9OyB9XG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbXMocGFyYW1zKTtcbiAgICByZXR1cm4gcXVlcnlTdHJpbmcgPyB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgcXVlcnlTdHJpbmcgOiB1cmw7XG59XG5mdW5jdGlvbiBwYXJzZVhIUlJlc3VsdCh4aHIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBvazogeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCxcbiAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFxuICAgICAgICBkYXRhOiB4aHIucmVzcG9uc2VUZXh0LFxuICAgICAgICBqc29uOiBmdW5jdGlvbiAoKSB7IHJldHVybiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOyB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBlcnJvclJlc3BvbnNlKHhociwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IG51bGw7IH1cbiAgICByZXR1cm4ge1xuICAgICAgICBvazogZmFsc2UsXG4gICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgZGF0YTogbWVzc2FnZSB8fCB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAganNvbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gSlNPTi5wYXJzZShtZXNzYWdlIHx8IHhoci5zdGF0dXNUZXh0KTsgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVlc3QobWV0aG9kLCB1cmwsIHF1ZXJ5UGFyYW1zLCBib2R5LCBvcHRpb25zKSB7XG4gICAgaWYgKHF1ZXJ5UGFyYW1zID09PSB2b2lkIDApIHsgcXVlcnlQYXJhbXMgPSB7fTsgfVxuICAgIGlmIChib2R5ID09PSB2b2lkIDApIHsgYm9keSA9IG51bGw7IH1cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSBERUZBVUxUX1JFUVVFU1RfT1BUSU9OUzsgfVxuICAgIHZhciBpZ25vcmVDYWNoZSA9IG9wdGlvbnMuaWdub3JlQ2FjaGUgfHwgREVGQVVMVF9SRVFVRVNUX09QVElPTlMuaWdub3JlQ2FjaGU7XG4gICAgdmFyIGhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwgREVGQVVMVF9SRVFVRVNUX09QVElPTlMuaGVhZGVycztcbiAgICB2YXIgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCBERUZBVUxUX1JFUVVFU1RfT1BUSU9OUy50aW1lb3V0O1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB3aXRoUXVlcnkodXJsLCBxdWVyeVBhcmFtcykpO1xuICAgICAgICBpZiAoaGVhZGVycykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZ25vcmVDYWNoZSkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tY2FjaGUnKTtcbiAgICAgICAgfVxuICAgICAgICB4aHIudGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICByZXNvbHZlKHBhcnNlWEhSUmVzdWx0KHhocikpO1xuICAgICAgICB9O1xuICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZXJyb3JSZXNwb25zZSh4aHIsICdGYWlsZWQgdG8gbWFrZSByZXF1ZXN0LicpKTtcbiAgICAgICAgfTtcbiAgICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoZXJyb3JSZXNwb25zZSh4aHIsICdSZXF1ZXN0IHRvb2sgbG9uZ2VyIHRoYW4gZXhwZWN0ZWQuJykpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAobWV0aG9kID09PSAncG9zdCcgJiYgYm9keSkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gXCIuL3JlcXVlc3RcIjtcbnZhciBBcGkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXBpKCkge1xuICAgIH1cbiAgICBBcGkucHJvdG90eXBlLmNoYXJnZVBheW1lbnRJbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVxdWVzdCgncG9zdCcsIHByb2Nlc3MuZW52LkNIQVJHRV9VUkwsIHt9LCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBwSWQnOiBvcHRpb25zLmFwcElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBjYWxsaW5nIGFwaSAoc3RhdHVzPVwiICsgcmVzdWx0LnN0YXR1cyArIFwiLCB0ZXh0PVwiICsgcmVzdWx0LnN0YXR1c1RleHQgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdC5qc29uKCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFwaS5wcm90b3R5cGUuYXV0aFBheW1lbnRJbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVxdWVzdCgncG9zdCcsIHByb2Nlc3MuZW52LkFVVEhfVVJMLCB7fSwgb3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FwcElkJzogb3B0aW9ucy5hcHBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgY2FsbGluZyBhcGkgKHN0YXR1cz1cIiArIHJlc3VsdC5zdGF0dXMgKyBcIiwgdGV4dD1cIiArIHJlc3VsdC5zdGF0dXNUZXh0ICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQuanNvbigpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXBpO1xufSgpKTtcbmV4cG9ydCB7IEFwaSB9O1xuIiwiZXhwb3J0IHZhciB2YWxpZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucyB8fCBPYmplY3Qua2V5cyhvcHRpb25zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIm9wdGlvbnNcIiwgXCJXaWRnZXQgb3B0aW9ucyB1bmRlZmluZWRcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmFwcElkIHx8IG9wdGlvbnMuYXBwSWQgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImFwcElkXCIsIFwiQVBJIGtleSB1bmRlZmluZWRcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmFtb3VudCB8fCBvcHRpb25zLmFtb3VudCA8PSAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJhbW91bnRcIiwgXCJBbW91bnQgbXVzdCBiZSBwb3NpdGl2ZSB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leHRDbGllbnRSZWYgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImV4dENsaWVudFJlZlwiLCBcIkNsaWVudCByZWZlcmVuY2UgbXVzdCBub3QgYmUgYmxhbmtcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmN1cnJlbmN5IHx8IG9wdGlvbnMuY3VycmVuY3kgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImN1cnJlbmN5XCIsIFwiQ3VycmVuY3kgbXVzdCBub3QgYmUgYmxhbmtcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmRlc2NyaXB0aW9uIHx8IG9wdGlvbnMuZGVzY3JpcHRpb24gPT09IFwiXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImRlc2NyaXB0aW9uXCIsIFwiRGVzY3JpcHRpb24gdW5kZWZpbmVkXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmVtYWlsICYmICFpc1ZhbGlkRW1haWwob3B0aW9ucy5lbWFpbCkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImVtYWlsXCIsIFwiRW1haWwgaW52YWxpZFwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuZXh0T3JkZXJzSWQgfHwgb3B0aW9ucy5leHRPcmRlcnNJZCA9PT0gXCJcIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXh0T3JkZXJzSWRcIiwgXCJPcmRlciBJRCByZWZlcmVuY2UgbXVzdCBub3QgYmUgYmxhbmtcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnN1Y2Nlc3NSZXR1cm5VcmwgfHwgIWlzVmFsaWRIdHRwVXJsKG9wdGlvbnMuc3VjY2Vzc1JldHVyblVybCkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcInN1Y2Nlc3NSZXR1cm5VcmxcIiwgXCJTdWNjZXNzIHJldHVybiBVUkwgaW5jb3JyZWN0XCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5lcnJvclJldHVyblVybCB8fCAhaXNWYWxpZEh0dHBVcmwob3B0aW9ucy5lcnJvclJldHVyblVybCkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImVycm9yUmV0dXJuVXJsXCIsIFwiRmFpbHVyZSByZXR1cm4gVVJMIGluY29ycmVjdFwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaXNWYWxpZEh0dHBVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgdmFyIHVybFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXihodHRwcz86XFxcXC9cXFxcLyk/JyArIC8vIHByb3RvY29sXG4gICAgICAgICcoKChbYS16XFxcXGRdKFthLXpcXFxcZC1dKlthLXpcXFxcZF0pKilcXFxcLikrW2Etel17Mix9fCcgKyAvLyBkb21haW4gbmFtZVxuICAgICAgICAnKChcXFxcZHsxLDN9XFxcXC4pezN9XFxcXGR7MSwzfSkpJyArIC8vIE9SIGlwICh2NCkgYWRkcmVzc1xuICAgICAgICAnKFxcXFw6XFxcXGQrKT8oXFxcXC9bLWEtelxcXFxkJV8ufitdKikqJyArIC8vIHBvcnQgYW5kIHBhdGhcbiAgICAgICAgJyhcXFxcP1s7JmEtelxcXFxkJV8ufis9LV0qKT8nICsgLy8gcXVlcnkgc3RyaW5nXG4gICAgICAgICcoXFxcXCNbLWEtelxcXFxkX10qKT8kJywgJ2knKTsgLy8gZnJhZ21lbnQgbG9jYXRvclxuICAgIHJldHVybiAhIXVybFJlZ2V4LnRlc3QodXJsKTtcbn07XG52YXIgaXNWYWxpZEVtYWlsID0gZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgdmFyIGVtYWlsUmVnZXggPSAvXigoW148PigpW1xcXVxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpW1xcXVxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFtePD4oKVtcXF1cXC4sOzpcXHNAXFxcIl0rXFwuKStbXjw+KClbXFxdXFwuLDs6XFxzQFxcXCJdezIsfSkkL2k7XG4gICAgcmV0dXJuICEhZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcbn07XG5leHBvcnQgdmFyIHZhbGlkYXRlQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGNhbGxiYWNrcykge1xuICAgIGlmIChjYWxsYmFja3Mub25TdWNjZXNzID09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwib25TdWNjZXNzIGNhbGxiYWNrIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY2FsbGJhY2tzLm9uRmFpbHVyZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIm9uRmFpbHVyZSBjYWxsYmFjayB1bmRlZmluZWRcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwiLi9TcGlubmVyXCI7XG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi9BcGlcIjtcbmltcG9ydCB7IHZhbGlkYXRlQ2FsbGJhY2tzLCB2YWxpZGF0ZU9wdGlvbnMgfSBmcm9tIFwiLi92YWxpZGF0aW9uXCI7XG52YXIgUGlUZWNoV2lkZ2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBpVGVjaFdpZGdldCgpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBQaVRlY2hXaWRnZXQucHJvdG90eXBlLmNyZWF0ZUlGcmFtZSA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICAgICAgdGhpcy5kZWxldGVJRnJhbWUoKTtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBpX3RlY2hfY29udGFpbmVyXCIpO1xuICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiUGlUZWNoV2lkZ2V0XCIpO1xuICAgICAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBpX3RlY2hfaWZyYW1lXCIpO1xuICAgICAgICBmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc3JjKTtcbiAgICAgICAgZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsIFwibm9cIik7XG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZnJhbWUpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgIH07XG4gICAgUGlUZWNoV2lkZ2V0LnByb3RvdHlwZS5kZWxldGVJRnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aWRnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlBpVGVjaFdpZGdldFwiKTtcbiAgICAgICAgaWYgKHdpZGdldCkge1xuICAgICAgICAgICAgd2lkZ2V0LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VMaXN0ZW5lcikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMubWVzc2FnZUxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBpVGVjaFdpZGdldC5wcm90b3R5cGUuY3JlYXRlSWZyYW1lTGlzdGVuZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LmRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gZXZlbnQuZGF0YS5hY3Rpb247XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBldmVudC5kYXRhLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdTVUNDRVNTJzpcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uU3VjY2Vzcyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VSUk9SJzpcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uRmFpbHVyZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0NPTVBMRVRFJzpcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlSUZyYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIFBpVGVjaFdpZGdldC5wcm90b3R5cGUucGF5ID0gZnVuY3Rpb24gKGFjdGlvbiwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbml0RGF0YSwgYXBpLCBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWRhdGVPcHRpb25zKG9wdGlvbnMpIHx8ICF2YWxpZGF0ZUNhbGxiYWNrcyhjYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdERhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpID0gbmV3IEFwaSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU3Bpbm5lci5zaG93KG9wdGlvbnMubGFuZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGFjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXV0aFwiOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hhcmdlXCI6IHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgYXBpLmF1dGhQYXltZW50SW5pdChvcHRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXREYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgYXBpLmNoYXJnZVBheW1lbnRJbml0KG9wdGlvbnMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdERhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignaW52YWxpZCBhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgU3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUlGcmFtZShpbml0RGF0YS5wYXltZW50VXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ZW5lciA9IHRoaXMuY3JlYXRlSWZyYW1lTGlzdGVuZXIoY2FsbGJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5tZXNzYWdlTGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUGlUZWNoV2lkZ2V0O1xufSgpKTtcbmV4cG9ydCB7IFBpVGVjaFdpZGdldCB9O1xuIiwiaW1wb3J0IHsgUGlUZWNoV2lkZ2V0IH0gZnJvbSBcIi4vUGlUZWNoV2lkZ2V0XCI7XG5pbXBvcnQgY3NzIGZyb20gXCIhIXJhdy1sb2FkZXIhLi9pbmRleC5jc3NcIjtcbmV4cG9ydCB2YXIgUGl0ZWNoUGF5bWVudHNXaWRnZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgUGlUZWNoV2lkZ2V0KCk7IH07XG5pZiAoIXdpbmRvdy5zdHlsZUFkZGVkKSB7XG4gICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3R5bGU+XCIgKyBjc3MgKyBcIjwvc3R5bGU+XCIpO1xuICAgIHdpbmRvdy5zdHlsZUFkZGVkID0gdHJ1ZTtcbn1cbndpbmRvdy5QaXRlY2hQYXltZW50c1dpZGdldCA9IFBpdGVjaFBheW1lbnRzV2lkZ2V0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==